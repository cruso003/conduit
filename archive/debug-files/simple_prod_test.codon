# Simplified Production Tools Test

from conduit.mcp.production_server import ProductionMCPServer
from conduit.mcp.jsonrpc import JSONRPCRequest

def test_basic_functionality():
    """Test basic server functionality."""
    print("Testing basic server functionality...")
    
    server = ProductionMCPServer()
    
    # Test initialize
    init_request = JSONRPCRequest("initialize", "1", '{"protocolVersion":"2024-11-05"}')
    response = server.handle_request(init_request)
    
    if '"protocolVersion": "2024-11-05"' in response.result:
        print("âœ… Initialize works correctly")
    else:
        print("âŒ Initialize failed")
        return False
    
    # Test tools/list
    list_request = JSONRPCRequest("tools/list", "2", '{}')
    response = server.handle_request(list_request)
    
    if '"tools"' in response.result:
        print("âœ… Tools list works correctly")
    else:
        print("âŒ Tools list failed")
        return False
    
    # Test a simple tool call
    weather_request = JSONRPCRequest("tools/call", "3", '{"name":"weather","arguments":{"city":"Boston"}}')
    response = server.handle_request(weather_request)
    
    if 'Weather in Boston' in response.result:
        print("âœ… Tool call works correctly")
    else:
        print("âŒ Tool call failed")
        print(f"Response: {response.result}")
        return False
    
    return True

def main():
    print("ğŸ§ª Simple Production Tools Test")
    print("=" * 40)
    
    if test_basic_functionality():
        print("ğŸ‰ Basic functionality test passed! âœ…")
    else:
        print("âŒ Basic functionality test failed")

if __name__ == "__main__":
    main()