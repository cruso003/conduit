# Test file for Week 5 Day 3: Handler Function Linking
# This tests that routes correctly call their handler functions

# Simulate the metadata function the plugin looks for
def add_route_metadata(pattern: str, method: str, handler_name: str):
    pass

# Minimal app class with decorators
class App:
    def get(self, pattern: str):
        def decorator(handler):
            add_route_metadata(pattern, "GET", handler.__name__)
            return handler
        return decorator
    
    def post(self, pattern: str):
        def decorator(handler):
            add_route_metadata(pattern, "POST", handler.__name__)
            return handler
        return decorator

app = App()

@app.get("/")
def home(req: str) -> str:
    return "Welcome home!"

@app.get("/users")
def list_users(req: str) -> str:
    return "User list"

@app.post("/users")
def create_user(req: str) -> str:
    return "User created"

@app.get("/about")
def about(req: str) -> str:
    return "About page"

# Test the dispatch
if __name__ == "__main__":
    print("âœ… Handler linking test compiled successfully")
    print("Routes defined: 4")
    print("  GET  / -> home()")
    print("  GET  /users -> list_users()")
    print("  POST /users -> create_user()")
    print("  GET  /about -> about()")
